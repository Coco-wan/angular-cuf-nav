/*! angular-cuf-nav by hjzheng 2015-02-05 */
angular.module("cuf-nav-template",["template/cufNav.html","template/cufNavChildItem.html","template/cufNavItem.html"]),angular.module("template/cufNav.html",[]).run(["$templateCache",function(a){a.put("template/cufNav.html",'<ul class="nav navbar-nav" ng-transclude></ul>')}]),angular.module("template/cufNavChildItem.html",[]).run(["$templateCache",function(a){a.put("template/cufNavChildItem.html",'<li ng-class="{\'dropdown-submenu\': hasChildren}">\n	<a ng-if="!hasChildren" href="{{href}}" class="dropdown-toggle" ng-click="clickToggle()" ng-mouseover="mouseOver()">{{ label }}</a>\n	<a ng-if="hasChildren" class="dropdown-toggle" ng-class="{\'dropdown-open\': show}" ng-click="clickToggle()" ng-mouseover="mouseOver()">{{ label }}</a>\n	<ul ng-if="hasChildren" role="menu" ng-class="{\'dropdown-menu\': hasChildren, \'dropdown-menu-show\': show}" ng-transclude>\n\n    </ul>\n</li>')}]),angular.module("template/cufNavItem.html",[]).run(["$templateCache",function(a){a.put("template/cufNavItem.html",'<li class="dropdown">\n	<a ng-if="!hasChildren" class="dropdown-toggle" href="{{href}}" ng-click="clickToggle()" ng-mouseover="mouseOver()">{{label}}</a>\n	<a ng-if="hasChildren" class="dropdown-toggle" ng-class="{\'dropdown-open\': show}" ng-click="clickToggle()" ng-mouseover="mouseOver()">{{label}} <span class="caret"></span></a>\n	<ul role="menu" ng-if="hasChildren" ng-class="{\'dropdown-menu\': hasChildren, \'dropdown-menu-show\': show}" ng-transclude>\n	<ul>\n</li>')}]),angular.module("cuf",["cuf-nav-template"]).directive("cufNav",["$window",function(a){return{scope:{triggeredEvent:"@"},restrict:"E",templateUrl:"template/cufNav.html",replace:!0,transclude:!0,controllerAs:"cufNavCtrl",controller:["$scope","$element","$attrs","$transclude",function(b,c){b.triggeredEvent||(b.triggeredEvent="click");var d=[];this.triggeredEvent=b.triggeredEvent,this.addItems=function(a){d.push(a)},this.closeOtherItems=function(a){angular.forEach(d,function(b){b.label!==a.label&&(b.show=!1,angular.forEach(a.childItems,function(a){angular.forEach(a,function(a){a.show=!1})}))})};var e=function(){b.$apply(function(){angular.forEach(d,function(a){a.show=!1,angular.forEach(a.childItems,function(a){angular.forEach(a,function(a){a.show=!1})})})})},f=function(a){if("click"===b.triggeredEvent){if(jQuery.contains(c[0],a.target)){if(jQuery(a.target.parentNode).attr("has-children"))return;e(a)}e(a)}},g=function(a){if("mouseover"===b.triggeredEvent){if(jQuery.contains(c[0],a.target))return;e(a)}};jQuery(a).on("click",f),jQuery(a).on("mouseover",g)}]}}]).directive("cufNavItem",function(){return{require:"^cufNav",scope:{label:"@",href:"@",triggeredEvent:"@",hasChildren:"@"},restrict:"E",templateUrl:"template/cufNavItem.html",replace:!0,transclude:!0,controllerAs:"cufNavItem",controller:["$scope","$element","$attrs","$transclude",function(a){this.triggeredEvent=a.triggeredEvent?a.triggeredEvent:a.$parent.$parent.triggeredEvent;var b=a.childItems={};this.addChildItems=function(a,c){b[a]=b[a]||[],b[a].push(c)},this.closeOtherChildItems=function(a,c){angular.forEach(b[a],function(a){a.label!==c.label&&(a.show=!1)})}}],link:function(a,b,c,d){d.addItems(a),a.triggeredEvent=d.triggeredEvent,a.clickToggle=function(){"click"===d.triggeredEvent&&(d.closeOtherItems(a),a.show=1==a.show?!1:!0)},a.mouseOver=function(){"mouseover"===d.triggeredEvent&&(d.closeOtherItems(a),a.show=1==a.show?!1:!0)}}}}).directive("cufNavChildItem",function(){return{require:"^cufNavItem",scope:{label:"@",href:"@",hasChildren:"@"},restrict:"E",templateUrl:"template/cufNavChildItem.html",replace:!0,transclude:!0,controllerAs:"cufNavItem",controller:["$scope","$element","$attrs","$transclude",function(){}],link:function(a,b,c,d){var e=jQuery(b[0].parentNode.parentNode).attr("label");e&&(a.parentLabel=e,d.addChildItems(e,a)),a.clickToggle=function(){"click"===d.triggeredEvent&&(d.closeOtherChildItems(a.parentLabel,a),a.show=1==a.show?!1:!0)},a.mouseOver=function(){"mouseover"===d.triggeredEvent&&(d.closeOtherChildItems(a.parentLabel,a),a.show=1==a.show?!1:!0)}}}});
